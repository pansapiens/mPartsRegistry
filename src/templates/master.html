<html>
<head>
<title>mPartsRegistry</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
{% comment %}
<link rel="stylesheet" href="/css/jquery.mobile-1.0.1.min.css">
<script src="/js/jquery-1.6.4.min.js"></script>
<script src="/js/jquery.mobile-1.0.1.min.js"></script>
{% endcomment %}

<link rel="stylesheet" href="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.css" />
<script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
<script src="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.js"></script>

<script type="text/javascript">

Storage.prototype.setObject = function(key, value) {
    this.setItem(key, JSON.stringify(value));
}
 
Storage.prototype.getObject = function(key) {
    return JSON.parse(this.getItem(key));
}

favs = localStorage.getObject("favorites");
//create an empty array if we have no favorites stored
if (favs == null) {
	  favs = [];
}

function toggleFavorite(id) {

	  var removed = false;
	  for (var i = 0; i < favs.length; i++) {
	   if (favs[i] == id) {
	     favs.splice(i, 1);
	     removed = true;
	     $('#favorite').html("Add to favorites");
	   }
	  }
	  if (!removed) {
	     favs.push(id);
	     $('#favorite').html("Remove from favorites");
	  }
	  localStorage.setObject("favorites", favs);
}

function checkFavorite(id) {
	  for (var i = 0; i < favs.length; i++) {
	   if (favs[i] == id) {
	     return true;
	   }
	  }
	  return false;
}

</script>

{% block head %}{% endblock %}

</head>

<body>
{% block body %}{% endblock %}
</body>
</html>
